<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Maze Gallery PWA</title>
  <link rel="manifest" href="pwa/manifest.json">
  <script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./service-worker.js');
    }
  </script>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <style>
    body { margin:0; background:#111; }
    .hud { position:fixed; left:10px; bottom:10px; color:#ddd; font:13px/1.35 system-ui, Arial; z-index:10; }
    .hud kbd { padding:0 6px; border:1px solid #666; border-bottom-width:2px; border-radius:4px; }
    #minimap { position:fixed; right:10px; bottom:10px; width:180px; height:140px; background:#0e0e0e; border:1px solid #333; border-radius:8px; padding:6px; z-index:11; }
    #minimap svg { width:100%; height:100%; }
    #zoomPanel { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.8); z-index:20; }
    #zoomPanel img { max-width:90vw; max-height:90vh; box-shadow:0 8px 30px rgba(0,0,0,.6); border-radius:8px; }
    #zoomClose { position:absolute; top:16px; right:20px; color:#fff; font:16px/1.2 system-ui; cursor:pointer; }
  </style>
</head>
<body>
  <div class="hud">
    이동: <kbd>WASD</kbd> · 시선: 마우스 드래그 · 달리기: <kbd>Shift</kbd> · 텔레포트: 초록 원 클릭<br>
    작품: 가까이 가면 라벨 표시 · 클릭하면 확대(오디오가 있으면 재생)
  </div>
  <div id="minimap"><svg id="mapSvg" viewBox="0 0 300 220"></svg></div>
  <div id="zoomPanel"><div id="zoomClose">닫기(ESC)</div><img id="zoomImg" alt="artwork zoom"></div>

  <a-scene id="scene" renderer="colorManagement: true; physicallyCorrectLights: true" background="color: #111">
    <!-- 이미지/오디오는 app.js가 외부 JSON을 읽은 뒤 a-assets로 주입 -->
    <a-entity id="rig">
      <a-entity id="cam" camera look-controls wasd-controls></a-entity>
    </a-entity>
    <!-- 기본 조명(테마에서 덮어쓰기 가능) -->
    <a-entity light="type: ambient; intensity: 0.55"></a-entity>
    <a-entity light="type: directional; intensity: 0.9" position="0 10 -10"></a-entity>
    <!-- 넓은 공용 바닥 -->
    <a-plane position="0 0 0" rotation="-90 0 0" width="120" height="80" color="#222"></a-plane>
  </a-scene>

  <script src="app.js"></script>
</body>
</html>
